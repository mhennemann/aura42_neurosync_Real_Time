<!DOCTYPE html>
<html lang="de" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroSync Backend - Persönlichkeit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="h-full bg-black text-white font-sans">

    <!-- Header -->
    <header class="border-b border-white/10 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-2xl font-bold">NeuroSync Backend</h1>
                <span class="px-3 py-1 text-xs bg-green-500/20 text-green-400 rounded-full">
                    🟢 Avatar Online
                </span>
            </div>

            <nav class="flex space-x-1">
                <a href="/backend/personality" class="bg-pink-500 text-white px-4 py-2 rounded-lg">
                    🧠 Persönlichkeit
                </a>
                <a href="#" class="text-gray-400 hover:text-white px-4 py-2 rounded-lg">
                    🎭 Animationen
                </a>
                <a href="#" class="text-gray-400 hover:text-white px-4 py-2 rounded-lg">
                    🧠 Gedächtnis
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="flex h-screen pt-20">

        <!-- Sidebar -->
        <div class="w-80 border-r border-white/10 flex flex-col" x-data="personalityConfig()">
            <div class="p-6 border-b border-white/10">
                <h2 class="text-xl font-semibold">🧠 Avatar Persönlichkeit</h2>
            </div>

            <div class="flex-1 overflow-y-auto p-6 space-y-6">

                <!-- Basis-Info -->
                <div class="bg-white/5 border border-white/10 rounded-lg p-4">
                    <h4 class="font-semibold mb-3">👤 Basis-Information</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm text-gray-300 mb-1">Name</label>
                            <input type="text" x-model="config.persoenlichkeit.name"
                                   class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2
                                          focus:border-pink-500 focus:outline-none">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-300 mb-1">Charakter</label>
                            <textarea x-model="config.persoenlichkeit.charakter"
                                      class="w-full bg-white/10 border border-white/20 rounded-lg px-3 py-2 h-20
                                             focus:border-pink-500 focus:outline-none resize-none"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Chat-Parameter -->
                <div class="bg-white/5 border border-white/10 rounded-lg p-4">
                    <h4 class="font-semibold mb-3">🤖 Chat-Parameter</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm text-gray-300 mb-2">
                                Temperature: <span class="text-pink-400" x-text="config.chat_parameter.temperature"></span>
                            </label>
                            <input type="range" x-model="config.chat_parameter.temperature"
                                   min="0" max="2" step="0.1" class="w-full accent-pink-500">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-300 mb-2">
                                Max Tokens: <span class="text-pink-400" x-text="config.chat_parameter.max_tokens"></span>
                            </label>
                            <input type="range" x-model="config.chat_parameter.max_tokens"
                                   min="50" max="500" step="10" class="w-full accent-pink-500">
                        </div>
                    </div>
                </div>

            </div>

            <!-- Save Button -->
            <div class="p-6 border-t border-white/10">
                <button @click="saveConfig()"
                        class="w-full bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg
                               transition-all duration-200">
                    💾 Konfiguration Speichern
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-6">
            <div class="bg-white/5 border border-white/10 rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4">🎭 Avatar Backend</h3>
                <p class="text-gray-300 mb-4">
                    Hier können Sie die Persönlichkeit Ihres NeuroSync-Avatars konfigurieren.
                </p>
                <div class="space-y-2 text-sm text-gray-400">
                    <p>✅ ChatGPT Integration aktiv</p>
                    <p>✅ LiveLink Animation verfügbar</p>
                    <p>✅ ElevenLabs TTS verfügbar</p>
                    <p>⚡ Bereit für weitere Module</p>
                </div>

                <div class="mt-6">
                    <a href="/" class="text-pink-500 hover:text-pink-400">← Zurück zum Chat</a>
                </div>
            </div>
        </div>

    </div>

    <script>function personalityConfig() {
        return {
            config: {
                persoenlichkeit: {
                    name: "Franzi",
                    charakter: "freundlich, hilfsbereit, neugierig"
                },
                chat_parameter: {
                    temperature: 0.7,
                    max_tokens: 150
                }
            },

            async init() {
                await this.loadConfig();
            },

            async loadConfig() {
                try {
                    const response = await fetch('/backend/api/personality');
                    this.config = await response.json();
                } catch (e) {
                    console.log('Using default config');
                }
            },

            async saveConfig() {
                try {
                    const response = await fetch('/backend/api/personality', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(this.config)
                    });

                    if (response.ok) {
                        alert('✅ Konfiguration gespeichert!');
                    }
                } catch (e) {
                    alert('❌ Fehler beim Speichern');
                }
            }
        }
    }</script>
</body>
</html>